

<script src="https://d2qrdklrsxowl2.cloudfront.net/js/hapyak.js"></script>

<div style="width: 60%;">
<iframe id="hapyak-player-157199-8825" marginwidth="0" marginheight="0" frameborder="no" scrolling="no" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" src="https://www.hapyak.com/embed?key=4c5b39201f724da898f5&amp;project=390557&amp;native_controls=true" width="720" height="405" class="hapyak-embed hapyak-responsive"></iframe>
</div>

<script type="text/javascript" src="https://d2qrdklrsxowl2.cloudfront.net/js/hapyak.js"></script>
<script type="text/javascript" src="https://d2qrdklrsxowl2.cloudfront.net/js/hapyak.api.js"></script>


<button id="button">Click me to change the color</button>
<span></span>



<script>
document.addEventListener("DOMContentLoaded", function () {
  var span = document.getElementById("span");

  // Setup an addon to listen for events from the iframe annotation
  hapyak.addon("color-change-listener", {
    init: function () {
      console.log("This is a message from init. Perform any setup needed here.");
    },
    "notify-color": function (e) {
      span.innerHTML = "Iframe background is " + e.data.color;
    }
  });

  document.getElementById("button").addEventListener("click", function () {
    // Broadcast a message to all iframes on the page
    Array.prototype.forEach.call(document.querySelectorAll("iframe"), function (iframe) {
      // Send a message to the iframe annotation telling it to change its color to red
      hapyak.message.send(iframe.contentWindow, "change-color", {
        "color": "red"
      });
      span.innerHTML = "Iframe background is red";
    });
  }, false);
}, false);
</script>


