<!doctype html>
<html>
	<head>
		<title></title>
		<meta charset="utf-8"/>
		<style type="text/css">
			html, body { margin: 0; padding: 0 }
		</style>
	</head>
	<body>
		<!-- HTML code goes here -->
		
		<p>Color-changing box</p>
		<span></span>

		<script type="text/javascript" src="//d2qrdklrsxowl2.cloudfront.net/js/hapyak-iframe.js"></script>
		<script type="text/javascript" src="//d2qrdklrsxowl2.cloudfront.net/js/hapyak.api.js"></script>
		<script type="text/javascript">
			(function () {
    			document.addEventListener('click', function () {
        		document.body.style.backgroundColor = 'blue';
        		// We need to pass a custom context so only addons we with the name `color-change-listener` act on the event
       		 	hapyak.message.send(window.parent, 'notify-color', {
            		customerContext: 'color-change-listener',
            		color: 'blue'
       		 	});
    		}, false);
    
			hapyak.message.addEventListener('change-color', function (e) {
        		document.body.style.backgroundColor = e.data.color;
    		});
		}());
		</script>
	</body>
</html>